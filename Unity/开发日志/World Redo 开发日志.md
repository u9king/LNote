# World Redo 开发日志

#### 1.游戏类型

银河恶魔城系列（类地下城），（可选像素风），boss战+地下城探索+剧情向(完成遗愿向)游戏

#### 2.技术内容

战斗系统 √

存储系统 √

背包系统 √

购买系统

角色升级系统

武器系统

日夜切换系统

宠物系统

剧情内容系统

特效shader系统

#### 2.1 人物能力

一级：走，跑，跳，攻击

二级：爬墙（1），滑铲（2），冲刺（4），射箭（6），滑翔（8），游泳（10）

三级：宠物（3）（仅限捡拾道具），法术攻击（12），替身攻击（14）

#### 2.2 场地能力

机关：风扇（1），弹簧（1），齿轮，，单向平台，移动平台，地刺，激光，念咒语，传送门，密室，隐藏通道，爬梯子，掉落重物，链球，移动刺头



#### 2.3 场地种类

森林1，沙漠2，雪地3，沼泽4，烈日5，海边6，地下7，石头8，木质建筑9，古城10，雷雨11，悬崖12，天空13，水底14，学院15，寺庙16，遗迹17，熔岩18，丧尸19，星海20，战争21，地下城22，奇幻23，魔法24，科技25，赛博26，黑白27，萨满28，傣族29，酒会30，原野31，黑帮32，君主33，法老34，三星堆35，血月36，爵士37



#### 2.4 boss

boss战斗大致分为20-30个左右

boss战更加侧重艺术表达，画面一定要华丽



每个boss房间前方需要有10-15分钟的地图探索

期间每个地图需要有2-3种不同的小怪，侧重点是小怪的攻击行为，出现地点，出现个数略有不同



20*2.5 = 50种小怪

20个boss

20张地图

#### 2.5 特色风格

商店小推车运送前线效果（随时购买）

跺脚从树上掉下来东西效果

以水车为目标设计一个关卡

（较多的魔法效果）





#### 3.关键技术：

1.有限状态机√

2.行为树√

3.实现多平台，PC和手柄要都能支持







#### 4.阶段划分

1阶段 5月份前

搭建5关左右的demo实现除宠物、剧情、特效外的所有内容



2阶段  6月份后 至 8月份

实现宠物、剧情、特效、优化美术工作

可以尝试搭建到30关内容

拍摄部分开发阶段内容



3阶段

实现打包，平台测试、商讨发布工作，投稿平台

#### 4.时间表

| 日期 | 工作 |                             备注                             |
| :--: | :--: | :----------------------------------------------------------: |
|      |      |                                                              |
|      |      |                                                              |
| 4/29 |      |                         骨骼动画学习                         |
| 4/28 |      |      替换人物为Knight插图<br />增加翻滚，下蹲，冲刺能力      |
| 4/27 |      | 牛头人受伤，死亡，击退效果完成<br />主项目决定去除PlayPersist场景，转而使用ScriptObject来管理短暂存储数据 |
| 4/26 |      |           研究牛头人行为树<br />完成小范围施法动作           |
| 4/24 |      |                     Pixel Adventure学完                      |
| 4/23 |      |                Pixel Adventure从30集开始学习                 |
| 4/22 |      |                       学习行为树Boss战                       |
| 4/19 |      |                Pixel Adventure从18集开始学习                 |
| 4/18 |      | Pixel Adventure从10集开始学习<br />学会下雨效果<br />练习简单像素画 |
| 4/17 |      |                 Pixel Adventure从0集开始学习                 |
| 4/16 |      |        学习冲刺跑项目案例*2，对象池和粒子系统实现方法        |
| 4/15 |      |                         跑步脚底灰尘                         |
| 4/12 |      |                      修改动画状态机内容                      |
| 4/11 |      |       对话系统<br />任务系统略看一遍<br />动画系统查询       |
| 4/10 |      |    添加小地图内容<br />添加渐变天空效果<br />修改金币系统    |
| 4/9  |      |                   学习小地图项目Roguelike                    |
| 4/8  |      |                      学习部分小地图项目                      |
| 4/7  |      |   修改背包系统内容<br />研究ScriptObject的存储方法，未完成   |
| 4/3  |      |      增加了Forest0和Forest2的场景<br />增加背包系统内容      |
| 4/1  |      |         增加了游戏存档系统<br />增加游戏音效调节功能         |
| 3/27 |      |     Menu场景搭建<br />优化场景转移代码<br />渐入渐出效果     |
| 3/26 |      |            实现场景加载转换<br />替换场景加载逻辑            |
| 3/24 |      |           优化相机工作，省去不需要的代码工作<br />           |
| 3/22 |      |  Awake启动的时候isGround不是true应该怎么办<br />UI重写绘画   |
| 3/21 |      | World Redo的白猪简单有限状态机实现，实现Idle，Patrol和Chase的逻辑 |
| 3/20 |      |                         switch语法糖                         |
| 3/19 |      | 三段攻击的攻击间隔存在问题<br />动画器存在问题<br />是否需要将动画逻辑剥离<br />写在动画上的逻辑在代码中无法查看，应该怎么办<br />新的地面存在卡墙的情况 |
| 3/18 |      |                优化跳跃手感<br />替换地形内容                |
| 3/15 |      |                      学习勇士传说<br />                      |
| 3/14 |      | 动画从Attack到Jump存在问题，在Fall的情况下不能变回正常的Idle情况<br />角色攻击判定被锁死所有物体都需要使用Polygon的问题<br />字体大小会随窗口大小变化而移动<br />蝙蝠的流血效果不够平滑，没有跟着蝙蝠移动，而是停留在原地流血<br />待优化：敌人死亡时，巡逻点和目标点也应该被删除掉，本质上需要解决leftPos挂在身上随本体变化的问题<br />动画旋转如何不使用差值，我需要将角色旋转到合适位置 |
| 3/13 |      | 单向平台边沿存在卡角色物体的情况<br />向上爬行存在自动的情况<br /> |
| 3/12 |      | 动画系统存在问题<br />瓦片网格大小不一致怎么办<br /><br />少屋顶素材<br />~~写文字一定要用Canvas吗，可以用TextRender~~ |
| 3/11 |      |           天空盒使用遇见问题<br />混合树动画有问题           |
|      |      |                                                              |



每关大概3-5个怪

每关2-3个机关

每章5+N个场景



### 1.核心代码总结

人物移动

```
public void Run()   //跑步
{
    float moveX = Input.GetAxisRaw("Horizontal");
    myRigidBody.velocity = new Vector2(moveX * runSpeed, myRigidBody.velocity.y);
    bool xAxisHasSpeed = Mathf.Abs(myRigidBody.velocity.x) > Mathf.Epsilon;    //检测速度
    if (xAxisHasSpeed)  //翻转
    {
        if (myRigidBody.velocity.x > 0.1f)
        {
            transform.localRotation = Quaternion.Euler(0, 0, 0);
        }
        if (myRigidBody.velocity.x < -0.1f)  //向左移动
        {
            transform.localRotation = Quaternion.Euler(0, 180, 0);  //图像翻转
        }
    }
    myAnim.SetBool("isRun", xAxisHasSpeed);    //动画设置布尔值
}
```

单向平台

```
void PlatformCheck()
{
    isPlatform = myFeet.IsTouchingLayers(LayerMask.GetMask("Platform"));
    if (isPlatform && Input.GetKeyDown("s"))
    {
        gameObject.layer = LayerMask.NameToLayer("Platform");
        Invoke("RestorePlayerLayer", 0.5f);
    }
}
void RestorePlayerLayer()
{
    gameObject.layer = LayerMask.NameToLayer("Player");
}
```

