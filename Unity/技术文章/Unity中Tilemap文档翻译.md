# Unity中Tilemap文档翻译

------

#### 目录

创建瓦片地图——Create Tilemaps

瓦片地图组件参考——Tilemap component reference



------

#### 创建瓦片地图——Create Tilemaps

​	Unity的瓦片地图系统(Tilemap system)存储和处理用于创建2D关卡的瓦片资源(Tile Assets)，这使得在Unity中创建和迭代关卡设计的整个周期过程变得相当容易。瓦片地图系统将所需要的信息从放置在上面的瓦片传输到其他相关组件，如瓦片地图渲染器(Tilemap Renderer)和瓦片地图碰撞器2D(Tilemap Collider 2D)。

​	默认情况下，Unity Editor中不包含瓦片地图包(Tilemap package)的，所以你必须从资源包管理器(Package Manager)中下载2D瓦片地图编辑包。

​	当你创建一个瓦片地图，网格组件(Grid component)是自动成为瓦片地图的父级，并且在你放置瓦片到瓦片地图上时作为引导。要创建，改变或者选取瓦片用来在瓦片地图上绘画，用瓦片调色板Tile Palette（窗口>2D>瓦片调色板）及其工具。有关详情，参考瓦片调色板和绘制瓦片地图。

| **Topic**                    | 标题               | 描述                                         |
| ---------------------------- | ------------------ | -------------------------------------------- |
| Tilemap component reference  | 瓦片地图组件参考   | 有关瓦片地图组件的属性                       |
| Grid                         | 网格组件           | 有关网格组件的属性                           |
| Tilemap Renderer             | 瓦片地图渲染器     | 有关瓦片地图渲染器的属性                     |
| Tile Asset                   | 瓦片资源参考       | 有关瓦片资源组件的属性                       |
| Tile Palette Preferences     | 瓦片调色板偏好     | 有关瓦片调色板的属性                         |
| Tilemap workflow             | 瓦片地图工作流     | 跟随基本工作流来创建瓦片地图                 |
| Hexagonal Tilemaps           | 六边形瓦片地图     | 创建六边形瓦片地图在你的2D项目中             |
| Isometric Tilemaps           | 等轴测瓦片地图     | 创建等轴测瓦片地图在你的2D项目中             |
| Scriptable Tiles             | 可编写脚本的瓦片   | 理解如何使用可编辑瓦片的可用类               |
| Scriptable Brushes           | 可编写脚本的笔刷   | 理解如何使用可编写脚本笔画的可用类           |
| Tile Palette visual elements | 瓦片调色可视化元素 | 学习哪一种可视化元素你可以用在绘画瓦片地图上 |

------

#### 瓦片地图组件参考——Tilemap component reference

  描述同创建瓦片地图一致

| 属性                 | 名称     | 描述                                                         |
| :------------------- | -------- | :----------------------------------------------------------- |
| Animation Frame Rate | 动画帧率 | 设置播放瓦片动画帧率。增加或者减少该值会改变瓦片动画的帧率。例如，如果设置为2，瓦片动画将以2倍于基础帧率播放。如果设置为3，瓦片动画将会以3倍于基础帧率播放。 |
| Color                | 颜色     | 选择一种颜色作为色调应用在瓦片地图上。设置为白色（默认颜色）来使Untiy在不着色的情况下渲染瓦片。 |
| Tile Anchor          | 瓦片锚点 | 输入沿xyz轴的偏移量（以单元格为单位）来偏移瓦片锚点位置在瓦片地图上。 |
| Direction            | 方向     | 选择一个瓦片在瓦片地图上的朝向。以下每个选项通过沿所选定的平面来布置瓦片并执行相同的功能。<br />XY  Unity沿XY平面布置瓦片<br />XZ  Unity沿XZ平面布置瓦片<br />YX  Unity沿YX平面布置瓦片<br />YZ  Unity沿YZ平面布置瓦片<br />ZX  Unity沿ZX平面布置瓦片<br />ZY  Unity沿ZY平面布置瓦片<br />Custom  选择此选项可启动以下自定义方向设置 |
| Offset               | 偏移     | 设置自定义方向的位置偏移。仅当瓦片地图组件的方向设置为自定义时才有效。 |
| Rotation             | 旋转     | 设置自定义方向的旋转。仅当瓦片地图组件的方向设置为自定义时才有效。 |
| Scale                | 缩放     | 设置自定义方向的缩放。仅当瓦片地图组件的方向设置为自定义时才有效。 |
| Info                 | 信息     | 展开此选项可查看瓦片地图中的资产。<br />瓦片  展示瓦片地图中所使用的瓦片资产列表<br />精灵  展示瓦片地图中所使用的精灵资产列表 |

---

#### 网格——Grid

   Grid组件是有助于根据选定的布局来对齐游戏对象（如瓦片）的导引网格。该组件将网格单元格位置转换为游戏对象的相应局部坐标。然后，Transform组件将这些局部坐标转换为世界空间或全局坐标。

| 属性         | 名称             | 描述                                                         |
| ------------ | ---------------- | ------------------------------------------------------------ |
| Cell Size    | 单元格大小       | 该网格单元格大小                                             |
| Cell Gap     | 单元格间隙       | 输入该网格单元格之间的间隙大小。如果输入一个负数，其绝对值高于单元格大小，Unity 会自动更改为该绝对值。例如，如果单元格大小是 (1, 1, 0) 且 间隙设置为 (–2, –2, 0)，编辑器将自动将间隙的值更改为 (–1, –1, 0)。 |
| Cell Layout  | 单元格布局       | 从下拉菜单中选择一个选项来定义此网格上单元格的形状和排列。<br />Rectangle  矩形<br />Hexagon  六边形<br />Isometric 等距布局，菱形<br />Isometric Z as Y 与等距布局类似，但Unity将单元格的Z位置转换为其局部Y坐标 |
| Cell Swizzle | 单元格平面的方向 | 选择一个顺序，Unity 为变换转换重新排序 XYZ 单元格坐标。<br />XYZ  Grid 组件使用默认的 XYZ 单元格坐标<br />XZY  Grid 组件将 XYZ 坐标重新排序为 XZY<br />YXZ  Grid 组件将 XYZ 坐标重新排序为 YXZ<br />YZX  Grid 组件将 XYZ 坐标重新排序为 YZX<br />ZXY  Grid 组件将 XYZ 坐标重新排序为 ZXY<br />ZYX  Grid 组件将 XYZ 坐标重新排序为 ZYX |

---

#### 瓦片地图渲染器——Tilemap Renderer

​	瓦片地图渲染器组件是瓦片游戏对象的一部分。它确定瓦片地图上所设置的瓦片的渲染方式

| 属性                        | 名称           | 描述                                                         |
| --------------------------- | -------------- | ------------------------------------------------------------ |
| Sort Order                  | 排序顺序       | 设置所选瓦片地图上的瓦片排序方向                             |
| Mode                        | 渲染模式       | 设置渲染器的渲染模式<br />Chunk—渲染器按位置对瓦片进行分组，并将瓦片的精灵一起批处理以进行渲染。选择此模式可在瓦片地图中获得最佳渲染性能<br />Individual—渲染器单独渲染每个瓦片，并且考虑它们的位置和排序顺序。此模式使瓦片上的精灵能够与场景中的其他渲染器或与自定义排序轴进行交互。<br /> |
| Detect Chunk Culling Bounds | 检测块剔除边界 | 确定渲染器如何检测用于剔除瓦片地图块的边界。这些边界可扩展瓦片地图块的边界，以确保在剔除过程中不会裁剪过的大的精灵。<br />Auto—渲染器会自动检查瓦片使用的精灵，以确定要使用的扩展剔除边界<br />Manual—用于扩展边界以剔除瓦片地图块的值是手动设置的 |
| Chunk Culling Bounds        | 块剔除边界     | 如果选择了上面的 Manual，则会启用。输入剔除边界扩展的值      |
| Sorting Layer               | 排序图层       | 从下拉框中选择现有的排序图层，或创建新的排序图层。           |
| Order in Layer              | 渲染优先级     | 设置瓦片地图在其排序图层中的渲染优先级。首先渲染编号较低的图层。编号较高的图层叠加在前者之上 |
| Mask Interaction            | 遮罩交互       | 设置 Tilemap Renderer 在与精灵遮罩(Sprite Mask)的交互方式<br />None—瓦片地图渲染器不与场景中的任何精灵遮罩交互，默认选项<br />Visible Inside Mask—仅渲染 Sprite Mask 覆盖的 Tilemap 区域<br />Visible Outside Mask—减去 Sprite Mask 覆盖的区域 |

---

#### 瓦片资源——Tile Asset

​	瓦片是应用在瓦片地图上用来搭建2D场景的资源。每个瓦片都引用一个精灵图片，然后被布置在瓦片地图网格之上。有关将精灵图预处理和导入转为瓦片的工作，参考创建瓦片文档。

| 属性          | 名称     | 描述                                                         |
| ------------- | -------- | ------------------------------------------------------------ |
| Preview       | 预览     | 显示所选瓦片的视觉效果预览                                   |
| Sprite        | 精灵图   | 选择要在此瓦片上渲染的精灵。单击右侧的圆圈图标可打开对象选择器窗口，然后从可用的精灵资源中进行选择，或者将精灵直接拖到此框中。 |
| Color         | 颜色     | 使用所选颜色为此瓦片上放置的精灵进行着色。设置为白色时，将渲染没有色调的精灵。 |
| Collider Type | 碰撞形状 | 定义为瓦片生成的碰撞体的形状<br />None—不生成碰撞体<br />Sprite—基于所选精灵图的轮廓生成碰撞体形状，碰撞体形状基于精灵的自定义物理形状(Custom Physics Shape)<br />Grid—碰撞体形状给予Tilemap的一个单元。单元格的形状取决于Tilemap的单元格布局。 |

---

#### 瓦片调色盘偏好——Tile Palette Preferences 

​	想要打开瓦片调色盘偏好(Tile Palette Preferences )窗口，从Edit>Preferences ...>2D>Tile Palette。在瓦片调色盘窗口可以自定义默认行为和默认工具。

| 偏好                                 | 名称                             | 描述                                                         |
| ------------------------------------ | -------------------------------- | ------------------------------------------------------------ |
| Target Edit Mode                     | 目标编辑模式                     | 在有效目标列表(Active Target list)中选择一个预制件实例(Prefab instance)时，这将会设置编辑目标的行为。由于性能的缘故，不建议在场景中编辑一个预制体实例时使用。<br />Enable Dialog—显示对话框让你在"预设模式"或"场景"中作出选择<br />Edit In Prefab Mode—用预设模式来编辑目标<br />Edit In Scene—用场景模式来编辑目标 |
| Active Targets Sorting Mode          | 有效目标排序模式                 | 给瓦片调色盘中的有效目标设置排序方法<br />Alphabetical—按照字母顺序对列表进行排序，顶部显示第一个项目<br />ReverseAlphabetical—反字母排序 |
| Restore Edit Mode Active Target      | 还原编辑模式有效目标             | 启用此选项可从播放模式返回编辑模式后，在瓦片调色板窗口中还原修改即播放模式修改无效 |
| Create Tile Method                   | 创建瓦片方式                     | 以此来规定当瓦片或者精灵被拖动到瓦片调色板时Tile Assets被创建的方法。基础选项是DefaultTile。 |
| Show Open Tile Palette In Scene View | 在场景视图中显示打开的瓦片调色板 | 启用此选项可在选择与瓦片调色板交互的对象时，在场景视图中显示打开瓦片调色板的覆盖层。 |
| Prefab Mode Grid Cell Size           | 预制模式网格单元格大小           | 设置Tilemap网格的默认单元格大小                              |
| Prefab Mode Grid Cell Gap            | 预设模式网格单元间隔             | 设置Tilemap网格的默认单元格间隔                              |
| Prefab Mode Grid Cell Layout         | 预设模式单元格布局               | 设置Tilemap网格的默认单元格布局                              |
| Prefab Mode Grid Cell Swizzle        | 预设模式单元格转换               | 设置Tilemap网格的默认单元格转换顺序                          |
| Default Tile Palette Tools           | 默认瓦片调色板工具组             | 这决定了瓦片调色板窗口中显示的工具列表，以便与网格画笔一起使用。左侧面板存储当前在瓦片调色板中可用的工具列表。右侧面板存储当前未使用但可以添加到选择中的工具列表。要将工具添加到当前可用列表中，请在右侧面板中选择它，然后选择添加（+）将其添加到左侧面板。要从当前可用列表中移除工具，请在左侧面板中选择它，然后选择移除（-）将其从左侧面板移除。<br />Save—保存修改后的默认调色板工具<br />Revert—恢复对默认调色板工具所进行的更改<br />Reset—重置默认调色板工具 |

---

#### 瓦片地图工作流程——Tilemap workflow

​	下面是创建瓦片地图的一般工作流程和步骤。

| 顺序 | 步骤             | 过程                                                         |
| ---- | ---------------- | ------------------------------------------------------------ |
| 1    | 创建瓦片地图     | 创建要在其上绘制瓦片的瓦片地图。此过程中还会自动创建 Grid 游戏对象作为瓦片地图的父级 |
| 2    | 创建瓦片资源     | 创建瓦片资源或者通过将精灵带入 Tile Palette 窗口自动生成瓦片 |
| 3    | 创建瓦片调色盘   | 瓦片调色盘                                                   |
| 4    | 绘制瓦片         | 用笔刷在瓦片地图上绘制                                       |
| 5    | 瓦片地图2D碰撞体 | 可以将 Tilemap Collider 2D 组件连接到瓦片地图以便使瓦片地图与 Physics2D 交互 |

​	**创建瓦片地图：**瓦片地图是用于放置所选瓦片的游戏对象。通过GameObject>2D Object>Tilemap来创建。如果看不到这些选项需要通过Package Manager下载2D Tilemap Editor。

​	在2D Object中选择“Tilemap”选项可创建默认的矩形瓦片地图。

​	选择 Tilemap选项后，在场景中将会创建一个新的Grid游戏对象，其中包含 Tilemap 子游戏对象。Grid 游戏对象决定了其子 Tilemap 的布局。

​	Tilemap 子游戏对象由 Tilemap 组件和 Tilemap Render组件组成。Tilemap游戏对象用来绘制瓦片。

​	通过选择 Grid 游戏对象或 Tilemap 游戏对象创建额外的瓦片地图，然后转到菜单：GameObject> 2D Object > Tilemaps，或右键单击选定的游戏对象并转到 2D Object > Tilemap 将另一个瓦片地图作为子项添加到同一个父网格。

​	创建瓦片地图后，调整Grid属性设置从而调整其瓦片地图子项的属性，如Cell Size或子瓦片地图的布局类型。这些也会影响附加组件，如Tilemap Renderer和Tilemap Collider 2D组件。

​	**创建瓦片：**可使用两种方法在 Unity 中创建瓦片 (Tile) 资源；第一种方法是从 Assets 菜单直接创建瓦片资源。第二种方法是从一组精灵自动生成瓦片资源。

​	为瓦片资源导入和准备精灵：通过将纹理放入 Assets 文件夹，即可将瓦片地图的各个瓦片或瓦片集导入Untiy项目。选择导入的图像可以再Inspector窗口中查看器纹理导入器（Texture Importer）设置。

​	精灵导入设置：当我们为了在Tilemap中使用而导入精灵的时候，推荐使用以下设置。对于每个设置更深层的信息参考文档Texture Type:Sprite (2D and UI).